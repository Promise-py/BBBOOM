ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 1


   1              		.cpu cortex-m3
   2              		.arch armv7-m
   3              		.fpu softvfp
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"Battery.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.file 1 "BBBOOM/Src/Battery.c"
  18              		.global	__aeabi_ui2f
  19              		.global	__aeabi_fdiv
  20              		.global	__aeabi_f2d
  21              		.global	__aeabi_dmul
  22              		.global	__aeabi_d2f
  23              		.global	__aeabi_fcmpgt
  24              		.global	__aeabi_fadd
  25              		.section	.text.Battery_Init,"ax",%progbits
  26              		.align	1
  27              		.global	Battery_Init
  28              		.syntax unified
  29              		.thumb
  30              		.thumb_func
  32              	Battery_Init:
  33              	.LVL0:
  34              	.LFB65:
   1:BBBOOM/Src/Battery.c **** 
   2:BBBOOM/Src/Battery.c **** #include "Battery.h"
   3:BBBOOM/Src/Battery.c **** #include "ADS1015.h"
   4:BBBOOM/Src/Battery.c **** 
   5:BBBOOM/Src/Battery.c **** BATTERY Battery[3]={0};
   6:BBBOOM/Src/Battery.c **** unsigned int ADC1_value[8];//IN 8-14
   7:BBBOOM/Src/Battery.c **** unsigned int ADC2_value[8];//IN 0-7
   8:BBBOOM/Src/Battery.c **** 
   9:BBBOOM/Src/Battery.c **** /*
  10:BBBOOM/Src/Battery.c **** * ÁîµÊ±†ÂàùÂßãÂåñ
  11:BBBOOM/Src/Battery.c **** * ÂèÇÊï∞ÔºöÁîµÊ±†Êï∞ÊçÆÊåáÈíàÔºåÊä•Ë≠¶ÁîµÂéãÔºåÊñ≠ÁîµÁîµÂéã
  12:BBBOOM/Src/Battery.c **** */
  13:BBBOOM/Src/Battery.c **** void Battery_Init(BATTERY *battery,float alarm_voltage,float cut_off_voltage)
  14:BBBOOM/Src/Battery.c **** {
  35              		.loc 1 14 1 view -0
  36              		.cfi_startproc
  37              		@ args = 0, pretend = 0, frame = 0
  38              		@ frame_needed = 0, uses_anonymous_args = 0
  39              		.loc 1 14 1 is_stmt 0 view .LVU1
  40 0000 F8B5     		push	{r3, r4, r5, r6, r7, lr}
  41              	.LCFI0:
  42              		.cfi_def_cfa_offset 24
  43              		.cfi_offset 3, -24
  44              		.cfi_offset 4, -20
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 2


  45              		.cfi_offset 5, -16
  46              		.cfi_offset 6, -12
  47              		.cfi_offset 7, -8
  48              		.cfi_offset 14, -4
  49 0002 0446     		mov	r4, r0
  15:BBBOOM/Src/Battery.c ****     uint8_t i=0;
  50              		.loc 1 15 5 is_stmt 1 view .LVU2
  51              	.LVL1:
  16:BBBOOM/Src/Battery.c ****     for ( i = 0; i < 3; i++)
  52              		.loc 1 16 5 view .LVU3
  53              		.loc 1 16 13 is_stmt 0 view .LVU4
  54 0004 0023     		movs	r3, #0
  55              		.loc 1 16 5 view .LVU5
  56 0006 07E0     		b	.L2
  57              	.LVL2:
  58              	.L3:
  17:BBBOOM/Src/Battery.c ****     {
  18:BBBOOM/Src/Battery.c ****         battery[i].Alarm_Voltage = alarm_voltage;
  59              		.loc 1 18 9 is_stmt 1 discriminator 3 view .LVU6
  60              		.loc 1 18 16 is_stmt 0 discriminator 3 view .LVU7
  61 0008 03EB8300 		add	r0, r3, r3, lsl #2
  62 000c 04EBC000 		add	r0, r4, r0, lsl #3
  63              		.loc 1 18 34 discriminator 3 view .LVU8
  64 0010 0162     		str	r1, [r0, #32]	@ float
  19:BBBOOM/Src/Battery.c ****         battery[i].CutOff_Voltage = cut_off_voltage;
  65              		.loc 1 19 9 is_stmt 1 discriminator 3 view .LVU9
  66              		.loc 1 19 35 is_stmt 0 discriminator 3 view .LVU10
  67 0012 4262     		str	r2, [r0, #36]	@ float
  16:BBBOOM/Src/Battery.c ****     for ( i = 0; i < 3; i++)
  68              		.loc 1 16 26 is_stmt 1 discriminator 3 view .LVU11
  69 0014 0133     		adds	r3, r3, #1
  70              	.LVL3:
  16:BBBOOM/Src/Battery.c ****     for ( i = 0; i < 3; i++)
  71              		.loc 1 16 26 is_stmt 0 discriminator 3 view .LVU12
  72 0016 DBB2     		uxtb	r3, r3
  73              	.LVL4:
  74              	.L2:
  16:BBBOOM/Src/Battery.c ****     for ( i = 0; i < 3; i++)
  75              		.loc 1 16 20 is_stmt 1 discriminator 1 view .LVU13
  76 0018 022B     		cmp	r3, #2
  77 001a F5D9     		bls	.L3
  20:BBBOOM/Src/Battery.c ****     }
  21:BBBOOM/Src/Battery.c ****     
  22:BBBOOM/Src/Battery.c ****     
  23:BBBOOM/Src/Battery.c ****     for(i=0;i<8;i++)
  78              		.loc 1 23 10 is_stmt 0 view .LVU14
  79 001c 0025     		movs	r5, #0
  80 001e 01E0     		b	.L4
  81              	.LVL5:
  82              	.L5:
  83              		.loc 1 23 18 is_stmt 1 discriminator 2 view .LVU15
  84 0020 0135     		adds	r5, r5, #1
  85              	.LVL6:
  86              		.loc 1 23 18 is_stmt 0 discriminator 2 view .LVU16
  87 0022 EDB2     		uxtb	r5, r5
  88              	.LVL7:
  89              	.L4:
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 3


  90              		.loc 1 23 14 is_stmt 1 discriminator 1 view .LVU17
  91 0024 072D     		cmp	r5, #7
  92 0026 14D8     		bhi	.L26
  24:BBBOOM/Src/Battery.c **** 	{
  25:BBBOOM/Src/Battery.c ****         // HAL_ADCEx_Calibration_Start(&hadc1);
  26:BBBOOM/Src/Battery.c ****         HAL_ADC_Start(&hadc1);//ÂêØÂä®ADCËΩ¨Êç¢ÔºåÂøÖÈ°ªÊîæÂú®forÂæ™ÁéØ‰∏≠ÔºåÂê¶ÂàôÂè™ËÉΩÈááÈõÜÁ¨¨‰
  93              		.loc 1 26 9 view .LVU18
  94 0028 9F4E     		ldr	r6, .L30+8
  95 002a 3046     		mov	r0, r6
  96 002c FFF7FEFF 		bl	HAL_ADC_Start
  97              	.LVL8:
  27:BBBOOM/Src/Battery.c ****         HAL_ADC_PollForConversion(&hadc1,100); //Áî®‰∫éËΩÆËØ¢ËΩ¨Êç¢ÔºåÊòØ‰∏Ä‰∏™ÈòªÂ°ûÂáΩÊï∞ÔºåÁ≠âÂæ
  98              		.loc 1 27 9 view .LVU19
  99 0030 6421     		movs	r1, #100
 100 0032 3046     		mov	r0, r6
 101 0034 FFF7FEFF 		bl	HAL_ADC_PollForConversion
 102              	.LVL9:
  28:BBBOOM/Src/Battery.c ****         if(HAL_IS_BIT_SET(HAL_ADC_GetState(&hadc1),HAL_ADC_STATE_REG_EOC)) //Âà§Êñ≠ËΩ¨Êç¢ÂÆåÊàêÊ†áÂ
 103              		.loc 1 28 9 view .LVU20
 104              		.loc 1 28 12 is_stmt 0 view .LVU21
 105 0038 3046     		mov	r0, r6
 106 003a FFF7FEFF 		bl	HAL_ADC_GetState
 107              	.LVL10:
 108              		.loc 1 28 11 view .LVU22
 109 003e 10F4007F 		tst	r0, #512
 110 0042 EDD0     		beq	.L5
  29:BBBOOM/Src/Battery.c ****         ADC1_value[i]=HAL_ADC_GetValue(&hadc1); //ÂºÄÂßãËØªADCÁöÑÂÄº
 111              		.loc 1 29 9 is_stmt 1 view .LVU23
 112              		.loc 1 29 23 is_stmt 0 view .LVU24
 113 0044 3046     		mov	r0, r6
 114 0046 FFF7FEFF 		bl	HAL_ADC_GetValue
 115              	.LVL11:
 116              		.loc 1 29 22 view .LVU25
 117 004a 984B     		ldr	r3, .L30+12
 118 004c 43F82500 		str	r0, [r3, r5, lsl #2]
 119 0050 E6E7     		b	.L5
 120              	.L26:
  30:BBBOOM/Src/Battery.c **** 	}
  31:BBBOOM/Src/Battery.c ****     HAL_ADC_Stop(&hadc1); //ÂÅúÊ≠¢Êì¶ÂâÇ
 121              		.loc 1 31 5 is_stmt 1 view .LVU26
 122 0052 9548     		ldr	r0, .L30+8
 123 0054 FFF7FEFF 		bl	HAL_ADC_Stop
 124              	.LVL12:
  32:BBBOOM/Src/Battery.c **** 
  33:BBBOOM/Src/Battery.c ****     for(i=0;i<8;i++)
 125              		.loc 1 33 5 view .LVU27
 126              		.loc 1 33 10 is_stmt 0 view .LVU28
 127 0058 0025     		movs	r5, #0
 128              		.loc 1 33 5 view .LVU29
 129 005a 01E0     		b	.L7
 130              	.LVL13:
 131              	.L8:
 132              		.loc 1 33 18 is_stmt 1 discriminator 2 view .LVU30
 133 005c 0135     		adds	r5, r5, #1
 134              	.LVL14:
 135              		.loc 1 33 18 is_stmt 0 discriminator 2 view .LVU31
 136 005e EDB2     		uxtb	r5, r5
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 4


 137              	.LVL15:
 138              	.L7:
 139              		.loc 1 33 14 is_stmt 1 discriminator 1 view .LVU32
 140 0060 072D     		cmp	r5, #7
 141 0062 14D8     		bhi	.L27
  34:BBBOOM/Src/Battery.c **** 	{
  35:BBBOOM/Src/Battery.c ****         // HAL_ADCEx_Calibration_Start(&hadc2);
  36:BBBOOM/Src/Battery.c ****         HAL_ADC_Start(&hadc2);//ÂêØÂä®ADCËΩ¨Êç¢ÔºåÂøÖÈ°ªÊîæÂú®forÂæ™ÁéØ‰∏≠ÔºåÂê¶ÂàôÂè™ËÉΩÈááÈõÜÁ¨¨‰
 142              		.loc 1 36 9 view .LVU33
 143 0064 924E     		ldr	r6, .L30+16
 144 0066 3046     		mov	r0, r6
 145 0068 FFF7FEFF 		bl	HAL_ADC_Start
 146              	.LVL16:
  37:BBBOOM/Src/Battery.c ****         HAL_ADC_PollForConversion(&hadc2,100); //Áî®‰∫éËΩÆËØ¢ËΩ¨Êç¢ÔºåÊòØ‰∏Ä‰∏™ÈòªÂ°ûÂáΩÊï∞ÔºåÁ≠âÂæ
 147              		.loc 1 37 9 view .LVU34
 148 006c 6421     		movs	r1, #100
 149 006e 3046     		mov	r0, r6
 150 0070 FFF7FEFF 		bl	HAL_ADC_PollForConversion
 151              	.LVL17:
  38:BBBOOM/Src/Battery.c ****         if(HAL_IS_BIT_SET(HAL_ADC_GetState(&hadc2),HAL_ADC_STATE_REG_EOC)) //Âà§Êñ≠ËΩ¨Êç¢ÂÆåÊàêÊ†áÂ
 152              		.loc 1 38 9 view .LVU35
 153              		.loc 1 38 12 is_stmt 0 view .LVU36
 154 0074 3046     		mov	r0, r6
 155 0076 FFF7FEFF 		bl	HAL_ADC_GetState
 156              	.LVL18:
 157              		.loc 1 38 11 view .LVU37
 158 007a 10F4007F 		tst	r0, #512
 159 007e EDD0     		beq	.L8
  39:BBBOOM/Src/Battery.c ****         ADC2_value[i]=HAL_ADC_GetValue(&hadc2); //ÂºÄÂßãËØªADCÁöÑÂÄº
 160              		.loc 1 39 9 is_stmt 1 view .LVU38
 161              		.loc 1 39 23 is_stmt 0 view .LVU39
 162 0080 3046     		mov	r0, r6
 163 0082 FFF7FEFF 		bl	HAL_ADC_GetValue
 164              	.LVL19:
 165              		.loc 1 39 22 view .LVU40
 166 0086 8B4B     		ldr	r3, .L30+20
 167 0088 43F82500 		str	r0, [r3, r5, lsl #2]
 168 008c E6E7     		b	.L8
 169              	.L27:
  40:BBBOOM/Src/Battery.c **** 	}
  41:BBBOOM/Src/Battery.c ****     HAL_ADC_Stop(&hadc2); //ÂÅúÊ≠¢Êì¶ÂâÇ
 170              		.loc 1 41 5 is_stmt 1 view .LVU41
 171 008e 8848     		ldr	r0, .L30+16
 172 0090 FFF7FEFF 		bl	HAL_ADC_Stop
 173              	.LVL20:
  42:BBBOOM/Src/Battery.c ****     
  43:BBBOOM/Src/Battery.c ****     //‰∏ÄÂè∑ÁîµÊ±†ÁîµËäØÁîµÂéãÂΩïÂÖ•
  44:BBBOOM/Src/Battery.c ****     for ( i = 0; i < 4; i++)
 174              		.loc 1 44 5 view .LVU42
 175              		.loc 1 44 13 is_stmt 0 view .LVU43
 176 0094 0025     		movs	r5, #0
 177              	.LVL21:
 178              	.L10:
 179              		.loc 1 44 20 is_stmt 1 discriminator 1 view .LVU44
 180 0096 032D     		cmp	r5, #3
 181 0098 1BD8     		bhi	.L28
  45:BBBOOM/Src/Battery.c ****     {
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 5


  46:BBBOOM/Src/Battery.c ****         battery[0].Cells_Voltage[i] = (float)ADC1_value[2+i]/4095*3.3*Resistance;
 182              		.loc 1 46 9 discriminator 3 view .LVU45
 183              		.loc 1 46 58 is_stmt 0 discriminator 3 view .LVU46
 184 009a AA1C     		adds	r2, r5, #2
 185              		.loc 1 46 39 discriminator 3 view .LVU47
 186 009c 834B     		ldr	r3, .L30+12
 187 009e 53F82200 		ldr	r0, [r3, r2, lsl #2]
 188 00a2 FFF7FEFF 		bl	__aeabi_ui2f
 189              	.LVL22:
 190              		.loc 1 46 61 discriminator 3 view .LVU48
 191 00a6 8449     		ldr	r1, .L30+24
 192 00a8 FFF7FEFF 		bl	__aeabi_fdiv
 193              	.LVL23:
 194 00ac FFF7FEFF 		bl	__aeabi_f2d
 195              	.LVL24:
 196              		.loc 1 46 66 discriminator 3 view .LVU49
 197 00b0 7BA3     		adr	r3, .L30
 198 00b2 D3E90023 		ldrd	r2, [r3]
 199 00b6 FFF7FEFF 		bl	__aeabi_dmul
 200              	.LVL25:
 201              		.loc 1 46 70 discriminator 3 view .LVU50
 202 00ba 0022     		movs	r2, #0
 203 00bc 7F4B     		ldr	r3, .L30+28
 204 00be FFF7FEFF 		bl	__aeabi_dmul
 205              	.LVL26:
 206 00c2 FFF7FEFF 		bl	__aeabi_d2f
 207              	.LVL27:
 208              		.loc 1 46 37 discriminator 3 view .LVU51
 209 00c6 04EB8503 		add	r3, r4, r5, lsl #2
 210 00ca 5860     		str	r0, [r3, #4]	@ float
  44:BBBOOM/Src/Battery.c ****     {
 211              		.loc 1 44 26 is_stmt 1 discriminator 3 view .LVU52
 212 00cc 0135     		adds	r5, r5, #1
 213              	.LVL28:
  44:BBBOOM/Src/Battery.c ****     {
 214              		.loc 1 44 26 is_stmt 0 discriminator 3 view .LVU53
 215 00ce EDB2     		uxtb	r5, r5
 216              	.LVL29:
  44:BBBOOM/Src/Battery.c ****     {
 217              		.loc 1 44 26 discriminator 3 view .LVU54
 218 00d0 E1E7     		b	.L10
 219              	.L28:
  47:BBBOOM/Src/Battery.c ****     }
  48:BBBOOM/Src/Battery.c ****     battery[0].Cells_Voltage[4] = (float)ADC2_value[0]/4095*3.3*Resistance;
 220              		.loc 1 48 5 is_stmt 1 view .LVU55
 221              		.loc 1 48 52 is_stmt 0 view .LVU56
 222 00d2 784D     		ldr	r5, .L30+20
 223              	.LVL30:
 224              		.loc 1 48 35 view .LVU57
 225 00d4 2868     		ldr	r0, [r5]
 226 00d6 FFF7FEFF 		bl	__aeabi_ui2f
 227              	.LVL31:
 228              		.loc 1 48 55 view .LVU58
 229 00da 7749     		ldr	r1, .L30+24
 230 00dc FFF7FEFF 		bl	__aeabi_fdiv
 231              	.LVL32:
 232 00e0 FFF7FEFF 		bl	__aeabi_f2d
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 6


 233              	.LVL33:
 234              		.loc 1 48 60 view .LVU59
 235 00e4 6EA3     		adr	r3, .L30
 236 00e6 D3E90023 		ldrd	r2, [r3]
 237 00ea FFF7FEFF 		bl	__aeabi_dmul
 238              	.LVL34:
 239              		.loc 1 48 64 view .LVU60
 240 00ee 0022     		movs	r2, #0
 241 00f0 724B     		ldr	r3, .L30+28
 242 00f2 FFF7FEFF 		bl	__aeabi_dmul
 243              	.LVL35:
 244 00f6 FFF7FEFF 		bl	__aeabi_d2f
 245              	.LVL36:
 246              		.loc 1 48 33 view .LVU61
 247 00fa 6061     		str	r0, [r4, #20]	@ float
  49:BBBOOM/Src/Battery.c ****     battery[0].Cells_Voltage[5] = (float)ADC2_value[1]/4095*3.3*Resistance;
 248              		.loc 1 49 5 is_stmt 1 view .LVU62
 249              		.loc 1 49 35 is_stmt 0 view .LVU63
 250 00fc 6868     		ldr	r0, [r5, #4]
 251 00fe FFF7FEFF 		bl	__aeabi_ui2f
 252              	.LVL37:
 253              		.loc 1 49 55 view .LVU64
 254 0102 6D49     		ldr	r1, .L30+24
 255 0104 FFF7FEFF 		bl	__aeabi_fdiv
 256              	.LVL38:
 257 0108 FFF7FEFF 		bl	__aeabi_f2d
 258              	.LVL39:
 259              		.loc 1 49 60 view .LVU65
 260 010c 64A3     		adr	r3, .L30
 261 010e D3E90023 		ldrd	r2, [r3]
 262 0112 FFF7FEFF 		bl	__aeabi_dmul
 263              	.LVL40:
 264              		.loc 1 49 64 view .LVU66
 265 0116 0022     		movs	r2, #0
 266 0118 684B     		ldr	r3, .L30+28
 267 011a FFF7FEFF 		bl	__aeabi_dmul
 268              	.LVL41:
 269 011e FFF7FEFF 		bl	__aeabi_d2f
 270              	.LVL42:
 271              		.loc 1 49 33 view .LVU67
 272 0122 A061     		str	r0, [r4, #24]	@ float
  50:BBBOOM/Src/Battery.c ****     
  51:BBBOOM/Src/Battery.c **** 
  52:BBBOOM/Src/Battery.c ****     //‰∫åÂè∑ÁîµÊ±†ÁîµËäØÁîµÂéãÂΩïÂÖ•
  53:BBBOOM/Src/Battery.c ****     for ( i = 0; i < 6; i++)
 273              		.loc 1 53 5 is_stmt 1 view .LVU68
 274              	.LVL43:
 275              		.loc 1 53 13 is_stmt 0 view .LVU69
 276 0124 0025     		movs	r5, #0
 277              		.loc 1 53 5 view .LVU70
 278 0126 1AE0     		b	.L12
 279              	.LVL44:
 280              	.L13:
  54:BBBOOM/Src/Battery.c ****     {
  55:BBBOOM/Src/Battery.c ****         battery[1].Cells_Voltage[i] = (float)ADC2_value[2+i]/4095*3.3*Resistance;
 281              		.loc 1 55 9 is_stmt 1 discriminator 3 view .LVU71
 282              		.loc 1 55 58 is_stmt 0 discriminator 3 view .LVU72
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 7


 283 0128 AA1C     		adds	r2, r5, #2
 284              		.loc 1 55 39 discriminator 3 view .LVU73
 285 012a 624B     		ldr	r3, .L30+20
 286 012c 53F82200 		ldr	r0, [r3, r2, lsl #2]
 287 0130 FFF7FEFF 		bl	__aeabi_ui2f
 288              	.LVL45:
 289              		.loc 1 55 61 discriminator 3 view .LVU74
 290 0134 6049     		ldr	r1, .L30+24
 291 0136 FFF7FEFF 		bl	__aeabi_fdiv
 292              	.LVL46:
 293 013a FFF7FEFF 		bl	__aeabi_f2d
 294              	.LVL47:
 295              		.loc 1 55 66 discriminator 3 view .LVU75
 296 013e 58A3     		adr	r3, .L30
 297 0140 D3E90023 		ldrd	r2, [r3]
 298 0144 FFF7FEFF 		bl	__aeabi_dmul
 299              	.LVL48:
 300              		.loc 1 55 70 discriminator 3 view .LVU76
 301 0148 0022     		movs	r2, #0
 302 014a 5C4B     		ldr	r3, .L30+28
 303 014c FFF7FEFF 		bl	__aeabi_dmul
 304              	.LVL49:
 305 0150 FFF7FEFF 		bl	__aeabi_d2f
 306              	.LVL50:
 307              		.loc 1 55 37 discriminator 3 view .LVU77
 308 0154 04EB8503 		add	r3, r4, r5, lsl #2
 309 0158 D862     		str	r0, [r3, #44]	@ float
  53:BBBOOM/Src/Battery.c ****     {
 310              		.loc 1 53 26 is_stmt 1 discriminator 3 view .LVU78
 311 015a 0135     		adds	r5, r5, #1
 312              	.LVL51:
  53:BBBOOM/Src/Battery.c ****     {
 313              		.loc 1 53 26 is_stmt 0 discriminator 3 view .LVU79
 314 015c EDB2     		uxtb	r5, r5
 315              	.LVL52:
 316              	.L12:
  53:BBBOOM/Src/Battery.c ****     {
 317              		.loc 1 53 20 is_stmt 1 discriminator 1 view .LVU80
 318 015e 052D     		cmp	r5, #5
 319 0160 E2D9     		bls	.L13
  56:BBBOOM/Src/Battery.c ****     }
  57:BBBOOM/Src/Battery.c **** 
  58:BBBOOM/Src/Battery.c ****     //‰∏âÂè∑ÁîµÊ±†ÁîµËäØÁîµÂéãÂΩïÂÖ•
  59:BBBOOM/Src/Battery.c ****     battery[2].Cells_Voltage[0] = (float)ADC1_value[6]/4095*3.3*Resistance;
 320              		.loc 1 59 5 view .LVU81
 321              		.loc 1 59 52 is_stmt 0 view .LVU82
 322 0162 524D     		ldr	r5, .L30+12
 323              	.LVL53:
 324              		.loc 1 59 35 view .LVU83
 325 0164 A869     		ldr	r0, [r5, #24]
 326 0166 FFF7FEFF 		bl	__aeabi_ui2f
 327              	.LVL54:
 328              		.loc 1 59 55 view .LVU84
 329 016a 5349     		ldr	r1, .L30+24
 330 016c FFF7FEFF 		bl	__aeabi_fdiv
 331              	.LVL55:
 332 0170 FFF7FEFF 		bl	__aeabi_f2d
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 8


 333              	.LVL56:
 334              		.loc 1 59 60 view .LVU85
 335 0174 4AA3     		adr	r3, .L30
 336 0176 D3E90023 		ldrd	r2, [r3]
 337 017a FFF7FEFF 		bl	__aeabi_dmul
 338              	.LVL57:
 339              		.loc 1 59 64 view .LVU86
 340 017e 0022     		movs	r2, #0
 341 0180 4E4B     		ldr	r3, .L30+28
 342 0182 FFF7FEFF 		bl	__aeabi_dmul
 343              	.LVL58:
 344 0186 FFF7FEFF 		bl	__aeabi_d2f
 345              	.LVL59:
 346              		.loc 1 59 33 view .LVU87
 347 018a 6065     		str	r0, [r4, #84]	@ float
  60:BBBOOM/Src/Battery.c ****     battery[2].Cells_Voltage[1] = (float)ADC1_value[7]/4095*3.3*Resistance;
 348              		.loc 1 60 5 is_stmt 1 view .LVU88
 349              		.loc 1 60 35 is_stmt 0 view .LVU89
 350 018c E869     		ldr	r0, [r5, #28]
 351 018e FFF7FEFF 		bl	__aeabi_ui2f
 352              	.LVL60:
 353              		.loc 1 60 55 view .LVU90
 354 0192 4949     		ldr	r1, .L30+24
 355 0194 FFF7FEFF 		bl	__aeabi_fdiv
 356              	.LVL61:
 357 0198 FFF7FEFF 		bl	__aeabi_f2d
 358              	.LVL62:
 359              		.loc 1 60 60 view .LVU91
 360 019c 40A3     		adr	r3, .L30
 361 019e D3E90023 		ldrd	r2, [r3]
 362 01a2 FFF7FEFF 		bl	__aeabi_dmul
 363              	.LVL63:
 364              		.loc 1 60 64 view .LVU92
 365 01a6 0022     		movs	r2, #0
 366 01a8 444B     		ldr	r3, .L30+28
 367 01aa FFF7FEFF 		bl	__aeabi_dmul
 368              	.LVL64:
 369 01ae FFF7FEFF 		bl	__aeabi_d2f
 370              	.LVL65:
 371              		.loc 1 60 33 view .LVU93
 372 01b2 A065     		str	r0, [r4, #88]	@ float
  61:BBBOOM/Src/Battery.c ****     battery[2].Cells_Voltage[2] = (float)ADC1_value[0]/4095*3.3*Resistance;
 373              		.loc 1 61 5 is_stmt 1 view .LVU94
 374              		.loc 1 61 35 is_stmt 0 view .LVU95
 375 01b4 2868     		ldr	r0, [r5]
 376 01b6 FFF7FEFF 		bl	__aeabi_ui2f
 377              	.LVL66:
 378              		.loc 1 61 55 view .LVU96
 379 01ba 3F49     		ldr	r1, .L30+24
 380 01bc FFF7FEFF 		bl	__aeabi_fdiv
 381              	.LVL67:
 382 01c0 FFF7FEFF 		bl	__aeabi_f2d
 383              	.LVL68:
 384              		.loc 1 61 60 view .LVU97
 385 01c4 36A3     		adr	r3, .L30
 386 01c6 D3E90023 		ldrd	r2, [r3]
 387 01ca FFF7FEFF 		bl	__aeabi_dmul
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 9


 388              	.LVL69:
 389              		.loc 1 61 64 view .LVU98
 390 01ce 0022     		movs	r2, #0
 391 01d0 3A4B     		ldr	r3, .L30+28
 392 01d2 FFF7FEFF 		bl	__aeabi_dmul
 393              	.LVL70:
 394 01d6 FFF7FEFF 		bl	__aeabi_d2f
 395              	.LVL71:
 396              		.loc 1 61 33 view .LVU99
 397 01da E065     		str	r0, [r4, #92]	@ float
  62:BBBOOM/Src/Battery.c ****     battery[2].Cells_Voltage[3] = (float)ADC1_value[1]/4095*3.3*Resistance;
 398              		.loc 1 62 5 is_stmt 1 view .LVU100
 399              		.loc 1 62 35 is_stmt 0 view .LVU101
 400 01dc 6868     		ldr	r0, [r5, #4]
 401 01de FFF7FEFF 		bl	__aeabi_ui2f
 402              	.LVL72:
 403              		.loc 1 62 55 view .LVU102
 404 01e2 3549     		ldr	r1, .L30+24
 405 01e4 FFF7FEFF 		bl	__aeabi_fdiv
 406              	.LVL73:
 407 01e8 FFF7FEFF 		bl	__aeabi_f2d
 408              	.LVL74:
 409              		.loc 1 62 60 view .LVU103
 410 01ec 2CA3     		adr	r3, .L30
 411 01ee D3E90023 		ldrd	r2, [r3]
 412 01f2 FFF7FEFF 		bl	__aeabi_dmul
 413              	.LVL75:
 414              		.loc 1 62 64 view .LVU104
 415 01f6 0022     		movs	r2, #0
 416 01f8 304B     		ldr	r3, .L30+28
 417 01fa FFF7FEFF 		bl	__aeabi_dmul
 418              	.LVL76:
 419 01fe FFF7FEFF 		bl	__aeabi_d2f
 420              	.LVL77:
 421              		.loc 1 62 33 view .LVU105
 422 0202 2066     		str	r0, [r4, #96]	@ float
  63:BBBOOM/Src/Battery.c **** 
  64:BBBOOM/Src/Battery.c ****     battery[2].Cells_Voltage[4] = ADS1015_Read(0);
 423              		.loc 1 64 5 is_stmt 1 view .LVU106
 424              		.loc 1 64 35 is_stmt 0 view .LVU107
 425 0204 0020     		movs	r0, #0
 426 0206 FFF7FEFF 		bl	ADS1015_Read
 427              	.LVL78:
 428              		.loc 1 64 33 view .LVU108
 429 020a FFF7FEFF 		bl	__aeabi_ui2f
 430              	.LVL79:
 431 020e 6066     		str	r0, [r4, #100]	@ float
  65:BBBOOM/Src/Battery.c ****     battery[2].Cells_Voltage[5] = ADS1015_Read(2);
 432              		.loc 1 65 5 is_stmt 1 view .LVU109
 433              		.loc 1 65 35 is_stmt 0 view .LVU110
 434 0210 0220     		movs	r0, #2
 435 0212 FFF7FEFF 		bl	ADS1015_Read
 436              	.LVL80:
 437              		.loc 1 65 33 view .LVU111
 438 0216 FFF7FEFF 		bl	__aeabi_ui2f
 439              	.LVL81:
 440 021a A066     		str	r0, [r4, #104]	@ float
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 10


  66:BBBOOM/Src/Battery.c **** 
  67:BBBOOM/Src/Battery.c ****     //ÁîµÊ±†ÊÄªÁîµÂéã&ÁîµËäØËäÇÊï∞ÂΩïÂÖ•
  68:BBBOOM/Src/Battery.c ****     for ( i = 0; i < 6; i++)
 441              		.loc 1 68 5 is_stmt 1 view .LVU112
 442              	.LVL82:
 443              		.loc 1 68 13 is_stmt 0 view .LVU113
 444 021c 0025     		movs	r5, #0
 445              		.loc 1 68 5 view .LVU114
 446 021e 01E0     		b	.L14
 447              	.LVL83:
 448              	.L19:
 449              		.loc 1 68 26 is_stmt 1 discriminator 2 view .LVU115
 450 0220 0135     		adds	r5, r5, #1
 451              	.LVL84:
 452              		.loc 1 68 26 is_stmt 0 discriminator 2 view .LVU116
 453 0222 EDB2     		uxtb	r5, r5
 454              	.LVL85:
 455              	.L14:
 456              		.loc 1 68 20 is_stmt 1 discriminator 1 view .LVU117
 457 0224 052D     		cmp	r5, #5
 458 0226 38D8     		bhi	.L29
  69:BBBOOM/Src/Battery.c ****     {
  70:BBBOOM/Src/Battery.c ****         if(battery[0].Cells_Voltage[i]>1)
 459              		.loc 1 70 9 view .LVU118
 460              		.loc 1 70 36 is_stmt 0 view .LVU119
 461 0228 2E46     		mov	r6, r5
 462 022a 04EB8503 		add	r3, r4, r5, lsl #2
 463 022e 5F68     		ldr	r7, [r3, #4]	@ float
 464              		.loc 1 70 11 view .LVU120
 465 0230 4FF07E51 		mov	r1, #1065353216
 466 0234 3846     		mov	r0, r7
 467 0236 FFF7FEFF 		bl	__aeabi_fcmpgt
 468              	.LVL86:
 469 023a 38B1     		cbz	r0, .L15
  71:BBBOOM/Src/Battery.c ****         {
  72:BBBOOM/Src/Battery.c ****             battery[0].Battery_Voltage += battery[0].Cells_Voltage[i];
 470              		.loc 1 72 13 is_stmt 1 view .LVU121
 471              		.loc 1 72 40 is_stmt 0 view .LVU122
 472 023c E169     		ldr	r1, [r4, #28]	@ float
 473 023e 3846     		mov	r0, r7
 474 0240 FFF7FEFF 		bl	__aeabi_fadd
 475              	.LVL87:
 476 0244 E061     		str	r0, [r4, #28]	@ float
  73:BBBOOM/Src/Battery.c ****             battery[0].Cells_Num++;
 477              		.loc 1 73 13 is_stmt 1 view .LVU123
 478              		.loc 1 73 23 is_stmt 0 view .LVU124
 479 0246 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 480              		.loc 1 73 33 view .LVU125
 481 0248 0133     		adds	r3, r3, #1
 482 024a 2370     		strb	r3, [r4]
 483              	.L15:
  74:BBBOOM/Src/Battery.c ****         }
  75:BBBOOM/Src/Battery.c **** 
  76:BBBOOM/Src/Battery.c ****         if(battery[1].Cells_Voltage[i]>1)
 484              		.loc 1 76 9 is_stmt 1 view .LVU126
 485              		.loc 1 76 36 is_stmt 0 view .LVU127
 486 024c 04EB8603 		add	r3, r4, r6, lsl #2
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 11


 487 0250 DF6A     		ldr	r7, [r3, #44]	@ float
 488              		.loc 1 76 11 view .LVU128
 489 0252 4FF07E51 		mov	r1, #1065353216
 490 0256 3846     		mov	r0, r7
 491 0258 FFF7FEFF 		bl	__aeabi_fcmpgt
 492              	.LVL88:
 493 025c 48B1     		cbz	r0, .L17
  77:BBBOOM/Src/Battery.c ****         {
  78:BBBOOM/Src/Battery.c ****             battery[1].Battery_Voltage += battery[1].Cells_Voltage[i];
 494              		.loc 1 78 13 is_stmt 1 view .LVU129
 495              		.loc 1 78 40 is_stmt 0 view .LVU130
 496 025e 616C     		ldr	r1, [r4, #68]	@ float
 497 0260 3846     		mov	r0, r7
 498 0262 FFF7FEFF 		bl	__aeabi_fadd
 499              	.LVL89:
 500 0266 6064     		str	r0, [r4, #68]	@ float
  79:BBBOOM/Src/Battery.c ****             battery[1].Cells_Num++;
 501              		.loc 1 79 13 is_stmt 1 view .LVU131
 502              		.loc 1 79 23 is_stmt 0 view .LVU132
 503 0268 94F82830 		ldrb	r3, [r4, #40]	@ zero_extendqisi2
 504              		.loc 1 79 33 view .LVU133
 505 026c 0133     		adds	r3, r3, #1
 506 026e 84F82830 		strb	r3, [r4, #40]
 507              	.L17:
  80:BBBOOM/Src/Battery.c ****         }
  81:BBBOOM/Src/Battery.c **** 
  82:BBBOOM/Src/Battery.c ****         if(battery[2].Cells_Voltage[i]>1)
 508              		.loc 1 82 9 is_stmt 1 view .LVU134
 509              		.loc 1 82 36 is_stmt 0 view .LVU135
 510 0272 04EB8606 		add	r6, r4, r6, lsl #2
 511              		.loc 1 82 11 view .LVU136
 512 0276 4FF07E51 		mov	r1, #1065353216
 513 027a 706D     		ldr	r0, [r6, #84]	@ float
 514 027c FFF7FEFF 		bl	__aeabi_fcmpgt
 515              	.LVL90:
 516 0280 0028     		cmp	r0, #0
 517 0282 CDD0     		beq	.L19
  83:BBBOOM/Src/Battery.c ****         {
  84:BBBOOM/Src/Battery.c ****             battery[2].Battery_Voltage += battery[2].Cells_Voltage[2];
 518              		.loc 1 84 13 is_stmt 1 view .LVU137
 519              		.loc 1 84 40 is_stmt 0 view .LVU138
 520 0284 E16D     		ldr	r1, [r4, #92]	@ float
 521 0286 E06E     		ldr	r0, [r4, #108]	@ float
 522 0288 FFF7FEFF 		bl	__aeabi_fadd
 523              	.LVL91:
 524 028c E066     		str	r0, [r4, #108]	@ float
  85:BBBOOM/Src/Battery.c ****             battery[2].Cells_Num++;
 525              		.loc 1 85 13 is_stmt 1 view .LVU139
 526              		.loc 1 85 23 is_stmt 0 view .LVU140
 527 028e 94F85030 		ldrb	r3, [r4, #80]	@ zero_extendqisi2
 528              		.loc 1 85 33 view .LVU141
 529 0292 0133     		adds	r3, r3, #1
 530 0294 84F85030 		strb	r3, [r4, #80]
 531 0298 C2E7     		b	.L19
 532              	.L29:
  86:BBBOOM/Src/Battery.c ****         }
  87:BBBOOM/Src/Battery.c ****     }
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 12


  88:BBBOOM/Src/Battery.c **** }
 533              		.loc 1 88 1 view .LVU142
 534 029a F8BD     		pop	{r3, r4, r5, r6, r7, pc}
 535              	.LVL92:
 536              	.L31:
 537              		.loc 1 88 1 view .LVU143
 538 029c AFF30080 		.align	3
 539              	.L30:
 540 02a0 66666666 		.word	1717986918
 541 02a4 66660A40 		.word	1074423398
 542 02a8 00000000 		.word	hadc1
 543 02ac 00000000 		.word	ADC1_value
 544 02b0 00000000 		.word	hadc2
 545 02b4 00000000 		.word	ADC2_value
 546 02b8 00F07F45 		.word	1166012416
 547 02bc 0000F83F 		.word	1073217536
 548              		.cfi_endproc
 549              	.LFE65:
 551              		.section	.text.Battery_Read,"ax",%progbits
 552              		.align	1
 553              		.global	Battery_Read
 554              		.syntax unified
 555              		.thumb
 556              		.thumb_func
 558              	Battery_Read:
 559              	.LVL93:
 560              	.LFB66:
  89:BBBOOM/Src/Battery.c **** 
  90:BBBOOM/Src/Battery.c **** void Battery_Read(BATTERY *battery)
  91:BBBOOM/Src/Battery.c **** {
 561              		.loc 1 91 1 is_stmt 1 view -0
 562              		.cfi_startproc
 563              		@ args = 0, pretend = 0, frame = 0
 564              		@ frame_needed = 0, uses_anonymous_args = 0
 565              		@ link register save eliminated.
  92:BBBOOM/Src/Battery.c **** 
  93:BBBOOM/Src/Battery.c **** }
 566              		.loc 1 93 1 view .LVU145
 567 0000 7047     		bx	lr
 568              		.cfi_endproc
 569              	.LFE66:
 571              		.global	ADC2_value
 572              		.section	.bss.ADC2_value,"aw",%nobits
 573              		.align	2
 576              	ADC2_value:
 577 0000 00000000 		.space	32
 577      00000000 
 577      00000000 
 577      00000000 
 577      00000000 
 578              		.global	ADC1_value
 579              		.section	.bss.ADC1_value,"aw",%nobits
 580              		.align	2
 583              	ADC1_value:
 584 0000 00000000 		.space	32
 584      00000000 
 584      00000000 
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 13


 584      00000000 
 584      00000000 
 585              		.global	Battery
 586              		.section	.bss.Battery,"aw",%nobits
 587              		.align	2
 590              	Battery:
 591 0000 00000000 		.space	120
 591      00000000 
 591      00000000 
 591      00000000 
 591      00000000 
 592              		.text
 593              	.Letext0:
 594              		.file 2 "d:\\msys64\\mingw64\\arm-none-eabi\\include\\machine\\_default_types.h"
 595              		.file 3 "d:\\msys64\\mingw64\\arm-none-eabi\\include\\sys\\_stdint.h"
 596              		.file 4 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f103xe.h"
 597              		.file 5 "Drivers/CMSIS/Device/ST/STM32F1xx/Include/stm32f1xx.h"
 598              		.file 6 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_def.h"
 599              		.file 7 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_dma.h"
 600              		.file 8 "Drivers/STM32F1xx_HAL_Driver/Inc/stm32f1xx_hal_adc.h"
 601              		.file 9 "Core/Inc/adc.h"
 602              		.file 10 "BBBOOM/Inc/Battery.h"
 603              		.file 11 "BBBOOM/Inc/ADS1015.h"
ARM GAS  C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s 			page 14


DEFINED SYMBOLS
                            *ABS*:0000000000000000 Battery.c
C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s:26     .text.Battery_Init:0000000000000000 $t
C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s:32     .text.Battery_Init:0000000000000000 Battery_Init
C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s:540    .text.Battery_Init:00000000000002a0 $d
C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s:583    .bss.ADC1_value:0000000000000000 ADC1_value
C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s:576    .bss.ADC2_value:0000000000000000 ADC2_value
C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s:552    .text.Battery_Read:0000000000000000 $t
C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s:558    .text.Battery_Read:0000000000000000 Battery_Read
C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s:573    .bss.ADC2_value:0000000000000000 $d
C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s:580    .bss.ADC1_value:0000000000000000 $d
C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s:590    .bss.Battery:0000000000000000 Battery
C:\Users\Lenovo\AppData\Local\Temp\ccjk9cZj.s:587    .bss.Battery:0000000000000000 $d

UNDEFINED SYMBOLS
__aeabi_ui2f
__aeabi_fdiv
__aeabi_f2d
__aeabi_dmul
__aeabi_d2f
__aeabi_fcmpgt
__aeabi_fadd
HAL_ADC_Start
HAL_ADC_PollForConversion
HAL_ADC_GetState
HAL_ADC_GetValue
HAL_ADC_Stop
ADS1015_Read
hadc1
hadc2
